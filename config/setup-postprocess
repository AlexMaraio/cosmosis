if [ -z "$COSMOSIS_SRC_DIR" ]
then
  cosmosis_dir=$( (cd $( dirname ${BASH_SOURCE[0]}); /bin/pwd) )
  cosmosis_dir=${cosmosis_dir%/config}
  export COSMOSIS_SRC_DIR="$cosmosis_dir"
fi


CONDA_DIR=${COSMOSIS_SRC_DIR}/conda

if [ ! -d "$CONDA_DIR" ]
then
  echo "This script only needs to be run under OSX, if you used auto-install"
  echo "On linux you do not need it."
  echo "If you are on OSX and used auto-install then something went wrong"
  echo "Please report this error - http://bitbucket.org/joezuntz/cosmosis/issues/new"
  return 1
fi

if [ ! -z "$UPS_DIR" ]
then
  echo "Please source this setup-postprocess script from a new terminal"
  echo "Not one where you have already sourced the setup-cosmosis script"
  echo "(They do not play well together - matplotlib is to blame)"
  return 1
fi

export PATH=${CONDA_DIR}/bin:${COSMOSIS_SRC_DIR}/bin:${PATH}
export PYTHONHOME=${CONDA_DIR}
export PYTHONPATH=${COSMOSIS_SRC_DIR}:${PYTHONPATH}
