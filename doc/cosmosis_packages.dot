
digraph depends
{
  #rankdir=LR

  subgraph plat
  {
    platform         [shape=Mrecord, label="{platform | libc \llibm\llibpthread\l...\l}" ]
  }

  compilers -> platform;

  subgraph l1
  {
    label = "externals";
    rank = same;
    compilers [shape=Mrecord, label="{compilers | libgfortran\llibquadmath\llibgcc_s\llibstdc++\llibgomp\l}" ]
    python  [ label="python" ];
    cfitsio [ label="cfitsio" ];
    gsl     [ label="gsl" ];
    fftw3   [ label="fftw3" ];
  }
    blas    [ label="blas" ];
    lapack  [ label="lapack" ];
  lapack -> blas;
  blas -> compilers;

  subgraph externals
  {
    wmap7_data ->  wmap7;
    planck_data -> planck;
    camb;
  }
  wmap7 -> lapack;
  wmap7 -> cfitsio;
  planck -> lapack;
  camb -> compilers;

  subgraph low
  {
    #rank = same;
    SciPy -> NumPy -> python;
    NumPy -> blas;
    PyFITS -> NumPy;
    PyMC -> SciPy;
    emcee -> NumPy;
  }

  subgraph middle
  {
    cosmosis;
  }
  cosmosis -> camb;
  cosmosis -> planck_data;
  cosmosis -> wmap7_data;
  cosmosis -> PyMC;
  cosmosis -> emcee;
  cosmosis -> PyFITS;
  cosmosis -> gsl;
  cosmosis -> fftw3;

  subgraph top
  {
    des_modules;
  }

  des_modules -> cosmosis;


  cfitsio -> platform;
  gsl -> platform;
  fftw3 -> platform;
  lapack -> platform;

  des_modules -> cosmosis;
  des_modules -> gsl;
  des_modules -> PyFITS;
  des_modules -> cosmosis;
  des_modules -> SciPy;
  des_modules -> NumPy;

  cosmosis -> cfitsio;
  cosmosis -> python;
  python [ label="python" ];
  python -> platform;
}
